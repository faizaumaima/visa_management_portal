<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.app.finance.PaymentVerificationController"
            stylesheets="@styles.css">

    <!-- Top: Title -->
    <top>
        <HBox spacing="12" styleClass="topbar">
            <padding><Insets topRightBottomLeft="14"/></padding>
            <Label text="Payment Verification" styleClass="title"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Label text="Queue: " styleClass="subtitle"/>
            <Label fx:id="queueCount" text="0" styleClass="subtitle"/>
        </HBox>
    </top>

    <!-- Left: Filters -->
    <left>
        <VBox spacing="10" styleClass="sidebar">
            <padding><Insets topRightBottomLeft="14"/></padding>

            <Label text="Filters" styleClass="section"/>
            <Label text="From date"/>
            <DatePicker fx:id="fromDate"/>
            <Label text="To date"/>
            <DatePicker fx:id="toDate"/>

            <Label text="Txn / Invoice ID"/>
            <TextField fx:id="idField" promptText="e.g., TXN-1029"/>

            <Label text="Method"/>
            <ComboBox fx:id="methodBox" promptText="Any"/>

            <Label text="Status"/>
            <ComboBox fx:id="statusBox" promptText="Any"/>

            <HBox spacing="8">
                <Button text="Search" onAction="#onSearch" HBox.hgrow="ALWAYS"/>
                <Button text="Reset" onAction="#onReset" HBox.hgrow="ALWAYS"/>
            </HBox>

            <Separator/>

            <CheckBox fx:id="flaggedOnly" text="Show flagged only"/>
        </VBox>
    </left>

    <!-- Center: Table -->
    <center>
        <VBox spacing="8" styleClass="content">
            <padding><Insets topRightBottomLeft="14"/></padding>

            <TableView fx:id="table">
                <columns>
                    <TableColumn text="Txn ID" fx:id="colTxnId" prefWidth="110"/>
                    <TableColumn text="Payer" fx:id="colPayer" prefWidth="150"/>
                    <TableColumn text="Method" fx:id="colMethod" prefWidth="90"/>
                    <TableColumn text="Amount" fx:id="colAmount" prefWidth="90"/>
                    <TableColumn text="Date" fx:id="colDate" prefWidth="120"/>
                    <TableColumn text="Status" fx:id="colStatus" prefWidth="100"/>
                    <TableColumn text="Flag" fx:id="colFlag" prefWidth="60"/>
                </columns>
            </TableView>

            <!-- Details/Action Panel -->
            <TitledPane text="Selected Transaction" expanded="true">
                <content>
                    <GridPane hgap="12" vgap="8">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="30"/>
                            <ColumnConstraints percentWidth="20"/>
                            <ColumnConstraints percentWidth="30"/>
                        </columnConstraints>

                        <Label text="Txn ID:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="dTxn" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                        <Label text="Invoice:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                        <Label fx:id="dInv" GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                        <Label text="Payer:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <Label fx:id="dPayer" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                        <Label text="Method:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                        <Label fx:id="dMethod" GridPane.rowIndex="1" GridPane.columnIndex="3"/>

                        <Label text="Amount:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <Label fx:id="dAmount" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                        <Label text="Date:" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                        <Label fx:id="dDate" GridPane.rowIndex="2" GridPane.columnIndex="3"/>

                        <Label text="Notes:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextArea fx:id="notes" promptText="Add verification notesâ€¦"
                                  GridPane.rowIndex="3" GridPane.columnIndex="1"
                                  GridPane.columnSpan="3" prefRowCount="2"/>

                        <HBox spacing="10" GridPane.rowIndex="4" GridPane.columnIndex="1" GridPane.columnSpan="3">
                            <Button text="Approve" onAction="#onApprove"/>
                            <Button text="Reject" onAction="#onReject"/>
                            <Button text="Flag/Suspend" onAction="#onFlag"/>
                        </HBox>
                    </GridPane>
                </content>
            </TitledPane>
        </VBox>
    </center>

    <!-- Bottom: Status bar -->
    <bottom>
        <HBox styleClass="statusbar">
            <padding><Insets topRightBottomLeft="8"/></padding>
            <Label text="Status: "/>
            <Label fx:id="statusLabel" text="Ready"/>
        </HBox>
    </bottom>
</BorderPane>